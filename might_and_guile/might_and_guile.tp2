BACKUP ~weidu_external/backup/might_and_guile~
AUTHOR ~SubtleD~

VERSION ~5alpha13~

// README ~might_and_guile/readme-M_n_G.html~

ALWAYS

	ACTION_IF (FILE_EXISTS_IN_GAME ~d5_mng_settings.ini~) BEGIN
  	  INCLUDE ~override/d5_mng_settings.ini~
  	END

	ACTION_IF !(FILE_EXISTS_IN_GAME ~d5_mng_settings.ini~) BEGIN
  	  INCLUDE ~might_and_guile/d5_mng_settings.ini~
	END
  	
// eliminate #bonecir.spl from IWDEE
	ACTION_IF GAME_IS ~iwdee~ BEGIN
	  ACTION_IF FILE_EXISTS_IN_GAME "#bonecir.spl" BEGIN
		DISABLE_FROM_KEY "#bonecir.spl"
	  END
	  ACTION_IF FILE_EXISTS "override/#bonecir.spl" BEGIN
		DELETE "override/#bonecir.spl"
	  END
	END

	INCLUDE ~might_and_guile/lib/misc_functions.tpa~

	INCLUDE ~might_and_guile/lib/hla_actions.tpa~

	INCLUDE ~might_and_guile/lib/a7#add_kit_ex.tpa~

	INCLUDE ~might_and_guile/lib/fl#add_kit_ee.tpa~

	INCLUDE ~might_and_guile/lib/qd_multiclass.tpa~

	INCLUDE ~might_and_guile/lib/semi_spontaneous.tpa~

	INCLUDE ~might_and_guile/lib/fnp_compatibility.tpa~

	INCLUDE ~might_and_guile/lib/extra_kit.tpa~

	LAF fix_kitlist_missing_ids END
	
END

// ASK_EVERY_COMPONENT

LANGUAGE
  ~English~
  ~english~
  ~might_and_guile/language/english/setup.tra~



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						  		  FIGHTER KITS
//__________________________________________________________________________________
//__________________________________________________________________________________


//____________________________CAVALIER______________________________________________
BEGIN @50
DESIGNATED 50
LABEL ~D5_FIGHTER_CAVALIER~

INCLUDE ~might_and_guile/components/50_fighter_cavalier.tpa~

LAF fighter_cavalier END
//__________________________________________________________________________________


//____________________________CORSAIR_______________________________________________
BEGIN @55
DESIGNATED 55
LABEL ~D5_CORSAIR_KIT~
REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @4

INCLUDE ~might_and_guile/components/55_corsair.tpa~

LAF corsair_kit END
//__________________________________________________________________________________


//____________________________SAMURAI_______________________________________________
BEGIN @60
DESIGNATED 60
LABEL ~D5_SAMURAI_KIT~
REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @4

INCLUDE ~might_and_guile/components/60_samurai.tpa~

LAF samurai_kit END
//__________________________________________________________________________________


//__________________________TOMB RUNNER_____________________________________________
BEGIN @80
DESIGNATED 80
LABEL ~D5_TOMB_RUNNER_KIT~
REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @4

INCLUDE ~might_and_guile/components/80_tomb_runner.tpa~

LAF tomb_runner_kit END
//__________________________________________________________________________________


//_____________________________THUG_________________________________________________
BEGIN @85
DESIGNATED 85
LABEL ~D5_CTHUG_KIT~
REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @4

INCLUDE ~might_and_guile/components/85_thug.tpa~

LAF thug_kit END
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						 		  THIEF KITS
//__________________________________________________________________________________
//__________________________________________________________________________________


//_____________________________RAKE_________________________________________________
BEGIN @90
DESIGNATED 90
LABEL ~D5_RAKE_KIT~
REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @4

INCLUDE ~might_and_guile/components/90_rake.tpa~

LAF rake_kit END
//__________________________________________________________________________________


//______________________________NINJA_______________________________________________
BEGIN @96
DESIGNATED 96
LABEL ~D5_NINJA_THIEF~
//SUBCOMPONENT @95
REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @4

INCLUDE ~might_and_guile/components/95_ninja.tpa~

LAF ninja_thief_kit END
//__________________________________________________________________________________

BEGIN @97
DESIGNATED 97
//SUBCOMPONENT @95
LABEL ~D5_NINJA_FIGHTER_THIEF~
REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @4

INCLUDE ~might_and_guile/components/95_ninja.tpa~

LAF ninja_fighter_thief_kit END
//__________________________________________________________________________________


//__________________________SPELLFILCHER____________________________________________
BEGIN @105
DESIGNATED 105
LABEL ~D5_SPELLFILCHER_KIT~
REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @4

INCLUDE ~might_and_guile/components/105_spellfilcher.tpa~

LAF spellfilcher_kit END
//__________________________________________________________________________________


//___________________________LOREMASTER_____________________________________________
BEGIN @110
DESIGNATED 110
LABEL ~D5_LOREMASTER_KIT~
REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @4

INCLUDE ~might_and_guile/components/110_loremaster.tpa~

LAF loremaster_kit END
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						  		 RANGER KITS
//__________________________________________________________________________________
//__________________________________________________________________________________


//________________________REGIONAL RANGERS__________________________________________
BEGIN @120
DESIGNATED 120
LABEL ~D5_REGIONAL_RANGERS~
REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @4

INCLUDE ~might_and_guile/components/120_regional_rangers.tpa~

LAF forest_ranger_kit END
LAF mountain_ranger_kit END
LAF jungle_ranger_kit END
LAF desert_ranger_kit END
LAF arctic_ranger_kit END
//__________________________________________________________________________________


//___________________________MAGE HUNTER____________________________________________
BEGIN @125
DESIGNATED 125
LABEL ~D5_MAGE_HUNTER~
REQUIRE_PREDICATE !(FILE_EXISTS_IN_GAME ~d5mageh.2da~) @5

INCLUDE ~might_and_guile/components/125_mage_hunter.tpa~

LAF mage_hunter_kit END
//__________________________________________________________________________________


//_________________________BARBARIAN RANGER_________________________________________
BEGIN @130
DESIGNATED 130
LABEL ~D5_BARBARIAN_RANGER~
REQUIRE_PREDICATE !(FILE_EXISTS_IN_GAME ~d5rbarb.2da~) @5

INCLUDE ~might_and_guile/components/130_barbarian_ranger.tpa~

LAF barb_ranger_kit END
//__________________________________________________________________________________

/* 
these are bad don't use these
//_____________________FAKE MULTICLASS RANGERS______________________________________
BEGIN @145
DESIGNATED 145

INCLUDE ~might_and_guile/components/145_fake_rangers.tpa~

LAF fake_ranger_multi_kits END
//__________________________________________________________________________________
*/


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						  		 ARCHER KITS
//__________________________________________________________________________________
//__________________________________________________________________________________

/*
//______________________FIGHTER ARCHER______________________________________________
BEGIN @151
DESIGNATED 151
LABEL ~D5_MARKSMAN~
FORBID_COMPONENT ~might_and_guile.tp2~ ~205~ @1

INCLUDE ~might_and_guile/components/151_archer_fighter.tpa~

LAF archer_fighter_kit END
//__________________________________________________________________________________
*/

//_______________________ELVEN ARCHER_______________________________________________
BEGIN @155
DESIGNATED 155
LABEL ~D5_ELVEN_ARCHER~
FORBID_COMPONENT ~might_and_guile.tp2~ ~205~ @1
REQUIRE_PREDICATE !(FILE_EXISTS_IN_GAME ~d5earch.2da~) @5

INCLUDE ~might_and_guile/components/155_elven_archer.tpa~

LAF elven_archer_kit END
//__________________________________________________________________________________


//_________________________SLINGER__________________________________________________
BEGIN @160
DESIGNATED 160
LABEL ~D5_HALFLING_SLINGER~
REQUIRE_PREDICATE (ENGINE_IS ~bgee bg2ee eet iwdee~) @4
FORBID_COMPONENT ~might_and_guile.tp2~ ~205~ @1
REQUIRE_PREDICATE !(FILE_EXISTS_IN_GAME ~d5_sling.2da~) @5

INCLUDE ~might_and_guile/components/160_halfling_slinger.tpa~

LAF halfling_slinger_kit END
//__________________________________________________________________________________


//_________________________MARKSMAN_________________________________________________
BEGIN @165
DESIGNATED 165
LABEL ~D5_SNIPER_KIT~
FORBID_COMPONENT ~might_and_guile.tp2~ ~205~ @1

INCLUDE ~might_and_guile/components/165_marksman.tpa~

LAF marksman_thief_kit END
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						  	 	RULE REVISIONS
//__________________________________________________________________________________
//__________________________________________________________________________________


//___________________________FEAT SYSTEM____________________________________________
BEGIN @200
DESIGNATED 200
LABEL ~D5_3E_FEAT_SYSTEM~
REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @4

INCLUDE ~might_and_guile/components/200_feats.tpa~
//__________________________________________________________________________________



//__________________________REVISED ARCHERY_________________________________________
BEGIN @205
DESIGNATED 205
LABEL ~D5_REVISED_ARCHERY~

INCLUDE ~might_and_guile/components/205_revised_archer.tpa~

LAF revised_archery END
//__________________________________________________________________________________



//________________________REVISED MULTICLASSING_____________________________________
BEGIN @220
DESIGNATED 220			//	soon to be 190
LABEL ~D5_REVISED_MULTICLASSING~
REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @4

INCLUDE ~might_and_guile/components/220_revised_multiclassing.tpa~

LAF revised_multiclassing END
//__________________________________________________________________________________



//_________________________RANGER SPELL TABLE_______________________________________
BEGIN @225
DESIGNATED 225
LABEL ~D5_RANGER_SPELL_TABLE~
REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @4

LAF ranger_spell_tables END
//__________________________________________________________________________________



//__________________________REVISED STALKER_________________________________________
BEGIN @230
DESIGNATED 230
LABEL ~D5_REVISED_STALKER~
FORBID_COMPONENT ~setup-might_and_guile.tp2~ ~200~ @1

INCLUDE ~might_and_guile/components/230_revised_stalker.tpa~

LAF revised_stalker END
//__________________________________________________________________________________



//_________________________REVISED BEASTMASTER______________________________________
BEGIN @235
DESIGNATED 235
LABEL ~D5_REVISED_BEASTMASTER~
REQUIRE_PREDICATE !(FILE_EXISTS_IN_GAME ~d5__beastmaster.d5~) @5

INCLUDE ~might_and_guile/components/235_revised_beastmaster.tpa~

LAF revised_beastmaster END
//__________________________________________________________________________________



//__________________________IMPROVED RANGERS________________________________________
BEGIN @240
DESIGNATED 240
LABEL ~D5_IMPROVED_RANGERS~
REQUIRE_PREDICATE !(FILE_EXISTS_IN_GAME ~d5__imp_rangers.d5~) @5

INCLUDE ~might_and_guile/components/240_improved_rangers.tpa~

LAF improved_rangers END
//__________________________________________________________________________________



//___________________________QUICKSTRIDE____________________________________________
BEGIN @245
DESIGNATED 245
LABEL ~D5_QUICKSTRIDE~
//REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @4

INCLUDE ~might_and_guile/components/245_quickstride.tpa~

ACTION_IF (GAME_IS ~bgee bg2ee eet iwdee~) BEGIN
  LAF quickstride_ee END
END

ACTION_IF (ENGINE_IS ~tob~) BEGIN
  LAF old_quickstride END
END

//__________________________________________________________________________________



//________________________REVISED BERSERK/RAGE______________________________________
BEGIN @250
DESIGNATED 250
LABEL ~D5_REVISED_RAGE~
REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @4

INCLUDE ~might_and_guile/components/250_revised_rage.tpa~

LAF 250_revised_rage END

// ***** change hp thing into temp immortality, and block hp view, and ranged thac0 penalty
//__________________________________________________________________________________


/*
//__________________________REVISED MONK CLASS______________________________________
BEGIN @260
DESIGNATED 260
LABEL ~D5_REVISED_MONK_CLASS~
REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @4

INCLUDE ~might_and_guile/components/260_monk_class.tpa~

// remove the trueclass monk - zero out clabmo01.2da and remove it from K_M_x.2da menus

// change strings to make it a "scout" class

// move the Archer here

// move the ninja here

// move the shadowdancer here...?

//__________________________________________________________________________________
*/


//__________________________REVISED MONK FISTS______________________________________
BEGIN @265
DESIGNATED 265
LABEL ~D5_REVISED_MONK_FISTS~
//REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @4

INCLUDE ~might_and_guile/components/265_monk_fist.tpa~

ACTION_IF (GAME_IS ~bgee bg2ee eet iwdee~) BEGIN
  LAF revised_monk_fists_ee END
END

ACTION_IF (ENGINE_IS ~tob~) BEGIN
  LAF old_monk_fists END
END
//__________________________________________________________________________________



//_________________________REVISED SHADOWDANCER_____________________________________
BEGIN @275
DESIGNATED 275
LABEL ~D5_REVISED_SHADOWDANCER~
REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @4
FORBID_COMPONENT ~might_and_guile.tp2~ ~200~ @1
FORBID_COMPONENT ~might_and_guile.tp2~ ~260~ @1
DEPRECATED @6

INCLUDE ~might_and_guile/components/275_revised_shadowdancer.tpa~

LAF revised_shadowdancer END
//__________________________________________________________________________________



//________________________REVISED BACKSTABBING______________________________________
BEGIN @280
DESIGNATED 280
LABEL ~D5_REVISED_BACKSTABS~

INCLUDE ~might_and_guile/components/280_revised_backstabs.tpa~

LAF revised_backstabs END
//__________________________________________________________________________________



//________________________REVISED ROGUE THAC0_______________________________________
BEGIN @290
DESIGNATED 290
LABEL ~D5_REVISED_ROGUE_THAC0~

INCLUDE ~might_and_guile/components/290_revised_rogue_thac0.tpa~

LAF revised_rogue_thac0 END
//__________________________________________________________________________________



//___________________________REVISED BARDS__________________________________________
BEGIN @400
DESIGNATED 400
LABEL ~D5_REVISED_BARDS~
REQUIRE_PREDICATE (GAME_IS ~bgee bg2ee eet iwdee~) @4

ACTION_IF !(FILE_EXISTS ~TobEx_ini/TobExVer.txt~) BEGIN
  COPY ~%MOD_FOLDER%/misc/TobExVer.txt~ ~TobEx_ini/TobExVer.txt~
END

INCLUDE ~might_and_guile/lib/qd_multiclass.tpa~

LAM d5_revised_bard_settings

ACTION_IF d5_bards_5E_casting = 1 BEGIN
  ACTION_IF (FILE_EXISTS_IN_GAME ~d5__fnp_spont_option.d5~) BEGIN
    OUTER_SET 5e_divine = 0
  END
  ACTION_IF !(FILE_EXISTS_IN_GAME ~d5__fnp_spont_option.d5~) BEGIN
    OUTER_SET 5e_divine = 1
  END

  LAF semi_spontaneous_casting END

  ACTION_IF !(FILE_EXISTS_IN_GAME ~d5__5E_casting_divine.d5~) BEGIN
    LAF semi_divine_spells END
  END
  ACTION_IF !(FILE_EXISTS_IN_GAME ~d5__5E_casting_arcane.d5~) BEGIN
    ACTION_IF !(FILE_EXISTS_IN_GAME ~d5_new_identify.d5~) BEGIN
      LAF semi_spont_identify END
    END
    LAF semi_arcane_spells END
  END
  LAF process_semi_spells END
  ACTION_IF (FILE_EXISTS_IN_GAME ~qdtnb_spelltweaks_clone.qd~) BEGIN
    LAF 5E_revised_simulacrum END
  END
END

INCLUDE ~might_and_guile/components/400_revised_bards.tpa~

ACTION_IF FILE_EXISTS ~TobEx_ini/TobExVer.txt~ BEGIN
	DELETE ~TobEx_ini/TobExVer.txt~
END

// ***** if no feats use dialogue for song selection (see e.g. FnP nu paladins)
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//					    		2E-STYLE BARD KITS
//__________________________________________________________________________________
//__________________________________________________________________________________


//__________________________JONGLEUR________________________________________________
BEGIN @450
DESIGNATED 450
LABEL ~D5_2E_JONGLEUR~
FORBID_COMPONENT ~might_and_guile.tp2~ ~400~ @1

INCLUDE ~might_and_guile/components/450_jongleur.tpa~
//__________________________________________________________________________________


//_________________________LOREMASTER________________________________________________
BEGIN @460
DESIGNATED 460
LABEL ~D5_2E_LOREMASTER~
FORBID_COMPONENT ~might_and_guile.tp2~ ~400~ @1

INCLUDE ~might_and_guile/components/460_loremaster.tpa~
//__________________________________________________________________________________


//__________________________GALLANT_________________________________________________
BEGIN @470
DESIGNATED 470
LABEL ~D5_2E_GALLANT~
FORBID_COMPONENT ~might_and_guile.tp2~ ~400~ @1

INCLUDE ~might_and_guile/components/470_gallant.tpa~
//__________________________________________________________________________________


//________________________MEISTERSINGER_____________________________________________
BEGIN @480
DESIGNATED 480
LABEL ~D5_2E_MEISTERSINGER~
FORBID_COMPONENT ~might_and_guile.tp2~ ~400~ @1

INCLUDE ~might_and_guile/components/480_meistersinger.tpa~
//__________________________________________________________________________________


//_________________________LORESINGER_______________________________________________
BEGIN @490
DESIGNATED 490
LABEL ~D5_2E_LORESINGER~
FORBID_COMPONENT ~might_and_guile.tp2~ ~400~ @1

INCLUDE ~might_and_guile/components/490_loresinger.tpa~
//__________________________________________________________________________________


//_________________5E CASTING FOR 2E-STYLE BARDS____________________________________
BEGIN @499
DESIGNATED 499
LABEL ~D5_2E_BARDS_5E_CASTING~
FORBID_COMPONENT ~might_and_guile.tp2~ ~400~ @1
REQUIRE_PREDICATE !(FILE_EXISTS_IN_GAME ~d5__5E_casting_bards.d5~) @5

INCLUDE ~%MOD_FOLDER%/lib/semi_spontaneous.tpa~

INCLUDE ~might_and_guile/components/499_2E_bards_5E_casting.tpa~

LAF semi_spontaneous_casting INT_VAR include_arcane = 1 END

LAF 5E_casting_bards END

COPY ~%MOD_FOLDER%/lib/semi_spont/d5_marker.d5~ ~override/d5__5E_casting_arcane.d5~
COPY ~%MOD_FOLDER%/lib/semi_spont/d5_marker.d5~ ~override/d5__5E_casting_bards.d5~
//__________________________________________________________________________________

